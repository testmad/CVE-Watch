<template>
  <div id="app">
    <div id="left" class="column">
      <div class="top-left">
        <Logo />
      </div>
      <div class="bottom bottom-left">
        <Navigation />
      </div>
    </div>
    <router-view />
  </div>
</template>

<script>
import Logo from "@/components/Logo.vue"
import Navigation from "@/components/Navigation.vue"
import Modal from "@/components/Modal.vue";


const {ipcRenderer} = require('electron')

export default {
  components: {
    Logo,
    Navigation,
    // eslint-disable-next-line
    Modal
  },
  data() {
    return {
      online: false
    }
  },
  created() {
    ipcRenderer.on('connectionStatusUpdate', (event, arg) => {
      this.online = arg
      console.log('Online: ' + this.online)
    }),
    ipcRenderer.on('updatingNvd', () => {
      this.$store.commit('toggleNvdUpdate')
    }),
    ipcRenderer.on('updatingMitre', () => {
      this.$store.commit('toggleMitreUpdate')
    }),
    ipcRenderer.on('updatingWatchList', () => {
      this.$store.commit('toggleWatchListUpdate')
    }),
    ipcRenderer.on('addNvdItem', (event, arg) => {
      this.$store.dispatch('addNvdItem', arg)
    }),
    ipcRenderer.on('addMitreItem', (event, arg) => {
      this.$store.dispatch('addMitreItem', arg)
    }),
    ipcRenderer.on('updateNvdLastUpdate', (event, arg) => {
      this.$store.dispatch('setNvdLastUpdate', arg)
    }),
    ipcRenderer.on('updateMitreLastUpdate', (event, arg) => {
      this.$store.dispatch('setMitreLastUpdate', arg)
    }),
    ipcRenderer.on('importWatchList', (event, arg) => {
      this.$store.dispatch('importWatchList', arg)
    }),
    ipcRenderer.on('updatingCpe', () => {
      this.$store.commit('toggleCpeUpdate')
    }),
    ipcRenderer.on('addCpeItem', (event, arg) => {
      this.$store.dispatch('addCpeItem', arg)
    }),
    ipcRenderer.on('updateCpeLastUpdate', (event, arg) => {
      this.$store.dispatch('setCpeLastUpdate', arg)
    }),
    ipcRenderer.on('res-update-watchlist', (event, arg) => {
      arg.watchlist.isUpdating = !arg.watchlist.isUpdating
      this.$store.dispatch('replaceWatchList', arg)
      ipcRenderer.send('save-local-watchlist', this.$store.state.watchLists)
    }),
    ipcRenderer.on('info-for-modal', (event, arg) => {
      this.$root.$emit('res-info-for-modal', arg)
    })
  }
}
</script>

<style>

/*
* bg color = #202428
* panel color = #2c3034
* hover color = #34383c
* active color = #209e92 ?? #2c97de ?? #04aec8
*/
html {
  height: 100%;
}

body {
  height: 100%;
  overflow: hidden;
  margin: 0px;
  box-sizing: border-box;
  background: #202428;
  font-family: "Montserrat", sans-serif;
}

a,
a:hover,
a:focus {
  color: inherit !important;
  text-decoration: none !important;
}

.v--modal-overlay {
  background: #00000099 !important;
}

.v--modal {
  border-radius: 0px !important;
  box-shadow: none !important;
  border: 1px solid #34383c !important;
  background: #2c3034 !important; 
}

#app {
  display: flex;
}

.column {
  height: 100vh;
  display: flex;
  flex-direction: column;
}

#left {
  flex-shrink: 0;
  width: 90px;
  background-color: #2c3034;
}

#right {
  width: calc(100vw - 90px);
  height: calc(100vh - 90px);
}

.top-left {
  flex-shrink: 0;
  width: 90px;
  height: 90px;
  background: #2c3034;
}

.top-right {
  flex-shrink: 0;
  display: inline-flex;
  height:90px;
  background: #2c3034;
  border-bottom: 1px solid #34383c;
}

.bottom {
  flex-grow: 1;
}

.bottom-left{
  flex-grow: 1;
  border-right: 1px solid #34383c;
}

.bottom-right{
  flex-grow: 1;
  flex-shrink: 0;
  overflow-y: auto;
  overflow-x: hidden;
  height: calc(100vh - 114px);
  margin-top:12px;
  margin-left:12px;
  margin-right:6px;
}

.bottom-right::-webkit-scrollbar {
  width: 6px;
  background-color: #1a1d20;
}

.bottom-right::-webkit-scrollbar-thumb {
  background-color: #04aec8;
}

.bottom-right::-webkit-scrollbar-track {
  -webkit-box-shadow: inset 0 0 8px rgba(0, 0, 0, 0.4);
  background-color: #1a1d20;
}
</style>
